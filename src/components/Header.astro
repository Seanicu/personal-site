---
import { useTranslations } from '../i18n/utils';

interface Props {
  lang?: 'zh' | 'en';
}

const { lang = 'zh' } = Astro.props;
const t = useTranslations(lang);

const baseUrl = lang === 'zh' ? '' : '/en';
const navItems = [
  { href: `${baseUrl}/`, label: t('nav.home') },
  { href: `${baseUrl}/blog`, label: t('nav.blog') },
];

const siteName = lang === 'zh' ? 'Xanoto的语言空间' : 'Xiandu Blog';
const currentPath = Astro.url.pathname;
---

<header class="bg-paper border-b border-ink/10 sticky top-0 z-50">
  <nav class="container-custom py-6">
    <div class="grid grid-cols-[1fr_auto_1fr] items-center">
      <!-- 网站标题 -->
      <div class="flex justify-start">
        <a 
          href={lang === 'zh' ? '/' : '/en'} 
          class="text-heading-md text-ink font-bold no-underline hover:bg-accent hover:text-white px-3 py-1"
          style="transition: none;"
        >
          {siteName}
        </a>
      </div>
      
      <!-- 导航链接 -->
      <ul class="flex items-center space-x-2">
        {navItems.map((item) => (
          <li>
            <a
              href={item.href}
              class="px-4 py-2 text-body font-medium text-ink no-underline hover:bg-accent hover:text-white"
              class:list={[
                currentPath === item.href && 'underline decoration-accent'
              ]}
              style="transition: none;"
            >
              {item.label}
            </a>
          </li>
        ))}
      </ul>

      <!-- 语言切换 (放在右侧以保持导航居中) -->
      <div class="flex justify-end">
        <a
          href={lang === 'zh' ? '/en' : '/'}
          class="px-4 py-2 text-body font-medium text-ink no-underline hover:bg-accent hover:text-white"
          title={lang === 'zh' ? 'Switch to English' : '切换到中文'}
          style="transition: none;"
        >
          {lang === 'zh' ? 'EN' : '中文'}
        </a>
      </div>
    </div>
  </nav>
</header>
