---
import { useTranslations } from '../i18n/utils';

interface Props {
  post: any;
  lang?: 'zh' | 'en';
}

const { post, lang = 'zh' } = Astro.props;
const t = useTranslations(lang);
const { title, description, date, tags } = post.data;
const slug = post.slug;

// 格式化日期
const locale = lang === 'zh' ? 'zh-CN' : 'en-US';
const formattedDate = new Date(date).toLocaleDateString(locale, {
  year: 'numeric',
  month: 'long',
  day: 'numeric'
});

// 构建文章链接
const postUrl = lang === 'zh' 
  ? `/blog/${slug.replace(/^zh\//, '')}` 
  : `/en/blog/${slug.replace(/^en\//, '')}`;
---

<article class="border-b border-ink/10 pb-6">
  <a 
    href={postUrl} 
    class="block p-6 -mx-6 group no-underline"
    style="transition: none;"
  >
    <div class="group-hover:bg-accent group-hover:text-white" style="transition: none;">
      <h2 class="text-body-lg text-ink group-hover:text-white mb-2" style="transition: none;">
        {title}
      </h2>
      
      <p class="text-body text-ink-light group-hover:text-white/90 mb-2 leading-relaxed" style="transition: none;">
        {description}
      </p>
      
      <div class="flex items-center gap-3 flex-wrap">
        <time class="text-label text-ink-light group-hover:text-white/80" datetime={date.toISOString()} style="transition: none;">
          {formattedDate}
        </time>
        {tags && tags.length > 0 && (
          tags.map((tag: string) => (
            <span class="text-label text-ink-light group-hover:text-white/80 font-medium" style="transition: none;">
              #{tag}
            </span>
          ))
        )}
      </div>
    </div>
  </a>
</article>
